var Discord = require('discord.js');
var logger = require('winston');
var auth = require('./auth.json');
// Configure logger settings
logger.remove(logger.transports.Console);
logger.add(new logger.transports.Console, {
    colorize: true
});
logger.level = 'debug';
// Initialize Discord Bot
var bot = new Discord.Client();
bot.on('ready', function (evt) {
    logger.info('Connected');
    logger.info('Logged in as: ');
    logger.info(bot.username + ' - (' + bot.id + ')');
});
bot.on('message', function (user, userID, channelID, message, evt) {
    // Our bot needs to know if it will execute a command
    // It will listen for messages that will start with `!`
    logger.info('------------- JE SUIS DEDANS -------------')
    //bot.
    if (message.substring(0, 1) == '!') {
        var args = message.substring(1).split(' ');
        var cmd = args[0];
        var candid = args[1]
        args = args.splice(1);
        switch (cmd) {
            // !ping
            case 'ping':
                bot.sendMessage({
                    to: channelID,
                    message: 'Pong!'
                });
                break;
            // Just add any case commands if you want to..
            //!help
            case 'help':
                bot.sendMessage({
                    to: channelID,
                    message: 'Voici la liste des commandes disponibles : \
        !votecandid {@recrue} \
        !candidaccept {@recrue} \
        !candidrefuse {@recrue} \
        !accept {@recrue} \
        !refuse {@recrue} \
        !essaiaccept {@recrue} \
        !essairefuse {@recrue} \
        '
                });
                break;
            //!votecandid {@recrue}    = creation message dans le chanel #votes-candidatures avec un sondage 3 vote(:green_apple: :apple: :flag_white: )+ envoit message au candida
            case 'votecandid':
                votecandid(candid);
                break;
            //!candidaccept {@recrue} = supresion message dans le chanel #votes-candidatures + envoit message pausitif au candida
            case 'candidaccept':

                break;
            //!candidrefuse {@recrue} = supresion message dans le chanel #votes-candidatures + envoit message negatif au candida * + supresion de ce droit discord+ kik ?
            case 'candidrefuse':

                break;
            //!accept {@recrue}             = creation message dans le chanel #validation-période-d-essai avec sondage, 2vote :green_apple: :apple: + supresion rank @Candidats +ajout rank @Membre de Guilde  + evois un message de felicitation et toute la doc avec le lien du ds alli.
            case 'accept':

                break;
            //!refuse {@recrue}              = supresion rank @Candidats  + voir kik ? + evois un message de negatif au candidat *
            case 'refuse':

                break;
            //!essaiaccept {@recrue}   = supresion message #validation-période-d-essai
            case 'essaiaccept':

                break;
            //!essairefuse {@recrue}    = supresion message #validation-période-d-essai + supresion rank @Membre de Guilde + evois un message de negatif au candida * + voir kik ?
            case 'essairefuse':

                break;
        }
    }
});

bot.login(auth.token);

//************************* REGION FONCTION *************************

function votecandid(recrue) {
    /*bot.sendMessage({
    to: '615495564183863296', //ChannelID de vote-candidatures
    message: 'Lancement des votes pour la candidature de ' + recrue
    });*/
    var message = bot.generateMessage();
    message.content = 'Lancement des votes pour la candidature de ' + recrue;
    message.channel = '615495564183863296';
    message.react('??');
    message.react('??');
    message.react('??');
    bot.sendMessage(message);
}

function candidaccept(recrue) {

}

function candidrefuse(recrue) {

}

function accept(recrue) {

}

function refuse(recrue) {

}

function essaiaccept() {

}

function essairefuse() {

}
